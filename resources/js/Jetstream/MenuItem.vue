<script setup>
import { ref, computed } from "vue";
// import { mdiMinus, mdiPlus } from '@mdi/js'
// import Icon from '@/components/Icon.vue'
import MenuList from "./MenuList.vue";
import JetNavLink from "@/Jetstream/NavLink.vue";
const props = defineProps({
  item: {
    type: Object,
    required: true,
  },
  isSubmenuList: Boolean,
});

const emit = defineEmits(["menu-click"]);

const isDropdownActive = ref(false);

const componentIs = computed(() => (props.item.href ? "a" : "div"));

const hasDropdown = computed(() => !!props.item.menu);

const dropdownIcon = computed(() => (isDropdownActive.value ? "" : ""));

const itemTo = computed(() => props.item.to || null);

const itemHref = computed(() => props.item.href || null);
const itemRoute = computed(() => props.item.itemRoute || null);

const itemTarget = computed(() =>
  componentIs.value === "a" && props.item.target ? props.item.target : null
);

const menuClick = (event) => {
  console.log(event);
  if (hasDropdown.value) {
    isDropdownActive.value = !isDropdownActive.value;
    if (event == undefined) return;
    emit("menu-click", event, props.item);
    //  store.dispatch("asideLgToggle", false);
  } else {
    emit("menu-click", event, props.item);
  }
};

const styleActive = "font-bold text-white text-primary-600";

const styleInactive = "text-gray-500";
</script>

<template>
  <li>
    <div
      v-if="!itemHref"
      class="
        flex
        cursor-pointer
        text-gray-700
        hover:bg-[#e1e8f3]
        dark:hover:bg-gray-700 dark:hover:bg-opacity-50
      "
      :class="[isSubmenuList ? 'p-3 text-sm' : 'py-2']"
      @click="menuClick()"
    >
      <!-- <img
        v-if="item.icon"
        :src="item.icon"
        class="flex-none pr-3 pl-14"
        w="w-12"
      /> -->
      <div v-if="item.icon == 'Maintenance'" class="flex-none pr-3 pl-14">
        <svg
          width="20"
          height="20"
          viewBox="0 0 20 20"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g fill="#123E81" fill-rule="nonzero">
            <path
              d="m18.976 7.9-1.403-.238a7.927 7.927 0 0 0-.564-1.362l.827-1.157a1.232 1.232 0 0 0-.134-1.592l-1.245-1.245a1.226 1.226 0 0 0-1.588-.133L13.708 3a7.844 7.844 0 0 0-1.412-.58l-.234-1.388A1.234 1.234 0 0 0 10.842 0h-1.76c-.605 0-1.119.435-1.219 1.032l-.242 1.42a7.731 7.731 0 0 0-1.358.573l-1.15-.827c-.208-.15-.459-.23-.718-.23-.33 0-.643.13-.873.363l-1.25 1.245a1.237 1.237 0 0 0-.133 1.592l.836 1.174c-.23.439-.414.894-.556 1.366l-1.387.234C.435 8.042 0 8.557 0 9.162v1.76c0 .605.435 1.119 1.032 1.22l1.42.242c.147.467.339.923.573 1.357l-.823 1.145a1.232 1.232 0 0 0 .133 1.592l1.246 1.245a1.226 1.226 0 0 0 1.587.134l1.174-.836c.422.222.865.401 1.32.543l.234 1.404c.1.597.615 1.032 1.22 1.032h1.763c.606 0 1.12-.435 1.22-1.032l.239-1.404A7.927 7.927 0 0 0 13.7 17l1.157.827c.209.15.46.23.719.23.33 0 .639-.13.873-.363l1.245-1.245a1.237 1.237 0 0 0 .133-1.592L17 13.695a7.87 7.87 0 0 0 .564-1.362l1.404-.234A1.234 1.234 0 0 0 20 10.88V9.121a1.22 1.22 0 0 0-1.024-1.22zm-.096 2.98c0 .054-.037.1-.092.108l-1.754.293a.56.56 0 0 0-.452.413 6.688 6.688 0 0 1-.727 1.75.565.565 0 0 0 .026.615l1.031 1.454a.114.114 0 0 1-.012.142L15.655 16.9a.106.106 0 0 1-.08.033.103.103 0 0 1-.062-.02l-1.45-1.032a.565.565 0 0 0-.614-.026 6.688 6.688 0 0 1-1.75.727.555.555 0 0 0-.414.452l-.297 1.754a.108.108 0 0 1-.109.092H9.121a.108.108 0 0 1-.11-.092l-.292-1.754a.56.56 0 0 0-.413-.452 6.945 6.945 0 0 1-1.713-.701.578.578 0 0 0-.284-.076.55.55 0 0 0-.326.105L4.52 16.95a.124.124 0 0 1-.063.021.112.112 0 0 1-.08-.033l-1.245-1.245a.113.113 0 0 1-.012-.143l1.028-1.441a.572.572 0 0 0 .025-.618 6.625 6.625 0 0 1-.736-1.747.572.572 0 0 0-.45-.413L1.22 11.03a.108.108 0 0 1-.092-.109V9.162c0-.054.038-.1.092-.108l1.742-.293a.565.565 0 0 0 .456-.418 6.681 6.681 0 0 1 .714-1.754.558.558 0 0 0-.03-.61l-1.04-1.463a.114.114 0 0 1 .013-.142L4.32 3.13a.106.106 0 0 1 .08-.033c.024 0 .045.008.062.02l1.441 1.029c.184.13.427.137.619.025a6.625 6.625 0 0 1 1.746-.736.572.572 0 0 0 .414-.45l.3-1.768a.108.108 0 0 1 .11-.092h1.758c.055 0 .1.037.109.092l.292 1.742c.038.221.2.401.418.455.631.16 1.233.406 1.792.736.193.113.43.104.615-.025l1.441-1.036a.124.124 0 0 1 .063-.021c.016 0 .05.004.08.033l1.244 1.245a.113.113 0 0 1 .013.142l-1.032 1.45a.565.565 0 0 0-.025.614c.326.547.568 1.136.727 1.75.054.218.234.38.45.414l1.756.297a.108.108 0 0 1 .091.109v1.758h-.004z"
            />
            <path
              d="M10.002 5.682a4.319 4.319 0 0 0-4.316 4.316 4.319 4.319 0 0 0 4.316 4.316 4.319 4.319 0 0 0 4.316-4.316 4.319 4.319 0 0 0-4.316-4.316zm0 7.504a3.19 3.19 0 0 1-3.188-3.188 3.19 3.19 0 0 1 3.188-3.188 3.19 3.19 0 0 1 3.188 3.188 3.19 3.19 0 0 1-3.188 3.188z"
            />
          </g>
        </svg>
      </div>
      <span class="flex-grow">{{ item.label }}</span>
      <div v-if="isDropdownActive" class="text-primary pr-5">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          aria-hidden="true"
          role="img"
          width="24"
          height="24"
          preserveAspectRatio="xMidYMid meet"
          viewBox="0 0 20 20"
        >
          <path d="M15 14l-5-5l-5 5l-2-1l7-7l7 7z" fill="currentColor" />
        </svg>
      </div>
      <div v-if="!isDropdownActive" class="text-primary pr-5">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          aria-hidden="true"
          role="img"
          width="24"
          height="24"
          preserveAspectRatio="xMidYMid meet"
          viewBox="0 0 20 20"
        >
          <path d="M5 6l5 5l5-5l2 1l-7 7l-7-7z" fill="currentColor" />
        </svg>
      </div>
    </div>
    <jet-nav-link
      :is="componentIs"
      v-if="itemHref"
      :href="route(itemRoute)"
      class="
        flex
        cursor-pointer
        hover:bg-[#e1e8f3]
        w-full
        text-gray-700
        dark:hover:bg-gray-700 dark:hover:bg-opacity-50
      "
      :active="route().current(itemRoute)"
      :class="[isSubmenuList ? 'p-3 text-sm' : 'py-2']"
      @click="menuClick"
    >
      <div v-if="item.icon == 'run'" class="flex-none pr-3 pl-14">
        <svg
          width="25"
          height="20"
          viewBox="0 0 25 20"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M20.697 1.15a3.34 3.34 0 0 1 2.369.981 3.35 3.35 0 0 1 .677 3.763l-5.265 11.5a3.347 3.347 0 0 1-3.046 1.956H4.231a3.34 3.34 0 0 1-2.37-.981 3.35 3.35 0 0 1-.677-3.763l5.266-11.5A3.347 3.347 0 0 1 9.496 1.15z"
            stroke="#123E81"
            stroke-width="1.3"
            fill="none"
            fill-rule="evenodd"
          />
        </svg>
      </div>
      <div v-else-if="item.icon == 'Maintenance'" class="flex-none pr-3 pl-14">
        <svg
          width="20"
          height="20"
          viewBox="0 0 20 20"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g fill="#123E81" fill-rule="nonzero">
            <path
              d="m18.976 7.9-1.403-.238a7.927 7.927 0 0 0-.564-1.362l.827-1.157a1.232 1.232 0 0 0-.134-1.592l-1.245-1.245a1.226 1.226 0 0 0-1.588-.133L13.708 3a7.844 7.844 0 0 0-1.412-.58l-.234-1.388A1.234 1.234 0 0 0 10.842 0h-1.76c-.605 0-1.119.435-1.219 1.032l-.242 1.42a7.731 7.731 0 0 0-1.358.573l-1.15-.827c-.208-.15-.459-.23-.718-.23-.33 0-.643.13-.873.363l-1.25 1.245a1.237 1.237 0 0 0-.133 1.592l.836 1.174c-.23.439-.414.894-.556 1.366l-1.387.234C.435 8.042 0 8.557 0 9.162v1.76c0 .605.435 1.119 1.032 1.22l1.42.242c.147.467.339.923.573 1.357l-.823 1.145a1.232 1.232 0 0 0 .133 1.592l1.246 1.245a1.226 1.226 0 0 0 1.587.134l1.174-.836c.422.222.865.401 1.32.543l.234 1.404c.1.597.615 1.032 1.22 1.032h1.763c.606 0 1.12-.435 1.22-1.032l.239-1.404A7.927 7.927 0 0 0 13.7 17l1.157.827c.209.15.46.23.719.23.33 0 .639-.13.873-.363l1.245-1.245a1.237 1.237 0 0 0 .133-1.592L17 13.695a7.87 7.87 0 0 0 .564-1.362l1.404-.234A1.234 1.234 0 0 0 20 10.88V9.121a1.22 1.22 0 0 0-1.024-1.22zm-.096 2.98c0 .054-.037.1-.092.108l-1.754.293a.56.56 0 0 0-.452.413 6.688 6.688 0 0 1-.727 1.75.565.565 0 0 0 .026.615l1.031 1.454a.114.114 0 0 1-.012.142L15.655 16.9a.106.106 0 0 1-.08.033.103.103 0 0 1-.062-.02l-1.45-1.032a.565.565 0 0 0-.614-.026 6.688 6.688 0 0 1-1.75.727.555.555 0 0 0-.414.452l-.297 1.754a.108.108 0 0 1-.109.092H9.121a.108.108 0 0 1-.11-.092l-.292-1.754a.56.56 0 0 0-.413-.452 6.945 6.945 0 0 1-1.713-.701.578.578 0 0 0-.284-.076.55.55 0 0 0-.326.105L4.52 16.95a.124.124 0 0 1-.063.021.112.112 0 0 1-.08-.033l-1.245-1.245a.113.113 0 0 1-.012-.143l1.028-1.441a.572.572 0 0 0 .025-.618 6.625 6.625 0 0 1-.736-1.747.572.572 0 0 0-.45-.413L1.22 11.03a.108.108 0 0 1-.092-.109V9.162c0-.054.038-.1.092-.108l1.742-.293a.565.565 0 0 0 .456-.418 6.681 6.681 0 0 1 .714-1.754.558.558 0 0 0-.03-.61l-1.04-1.463a.114.114 0 0 1 .013-.142L4.32 3.13a.106.106 0 0 1 .08-.033c.024 0 .045.008.062.02l1.441 1.029c.184.13.427.137.619.025a6.625 6.625 0 0 1 1.746-.736.572.572 0 0 0 .414-.45l.3-1.768a.108.108 0 0 1 .11-.092h1.758c.055 0 .1.037.109.092l.292 1.742c.038.221.2.401.418.455.631.16 1.233.406 1.792.736.193.113.43.104.615-.025l1.441-1.036a.124.124 0 0 1 .063-.021c.016 0 .05.004.08.033l1.244 1.245a.113.113 0 0 1 .013.142l-1.032 1.45a.565.565 0 0 0-.025.614c.326.547.568 1.136.727 1.75.054.218.234.38.45.414l1.756.297a.108.108 0 0 1 .091.109v1.758h-.004z"
            />
            <path
              d="M10.002 5.682a4.319 4.319 0 0 0-4.316 4.316 4.319 4.319 0 0 0 4.316 4.316 4.319 4.319 0 0 0 4.316-4.316 4.319 4.319 0 0 0-4.316-4.316zm0 7.504a3.19 3.19 0 0 1-3.188-3.188 3.19 3.19 0 0 1 3.188-3.188 3.19 3.19 0 0 1 3.188 3.188 3.19 3.19 0 0 1-3.188 3.188z"
            />
          </g>
        </svg>
      </div>
      <div v-else-if="item.icon == 'Reports'" class="flex-none pr-3 pl-14">
        <svg
          width="24"
          height="22"
          viewBox="0 0 24 22"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g
            fill="#123E81"
            fill-rule="nonzero"
            stroke="#F4F7FC"
            stroke-width=".8"
          >
            <path
              d="M2.154 16.385c.306 0 .6-.122.816-.338l6.492-6.492 2.645 2.646a1.154 1.154 0 0 0 1.632 0L21 4.94v2.598a1.154 1.154 0 1 0 2.308 0V2.154c0-.637-.516-1.154-1.153-1.154h-5.385a1.154 1.154 0 0 0 0 2.308h2.6l-6.446 6.445-2.645-2.646a1.154 1.154 0 0 0-1.632 0l-7.308 7.308a1.154 1.154 0 0 0 .816 1.97zM22.154 18.692h-20a1.154 1.154 0 1 0 0 2.308h20a1.154 1.154 0 1 0 0-2.308z"
            />
          </g>
        </svg>
      </div>
      <div v-else-if="item.icon == 'Company'" class="flex-none pr-3 pl-14">
        <svg
          width="15"
          height="20"
          viewBox="0 0 15 20"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g fill="#123E81" fill-rule="nonzero">
            <path
              d="M7.317 7.684a.627.627 0 0 0-.885-.002l-2.057 2.06-.808-.81a.625.625 0 0 0-.883.884l1.25 1.25a.628.628 0 0 0 .884.001l2.5-2.5a.625.625 0 0 0 0-.883zM7.317 12.684a.627.627 0 0 0-.885-.002l-2.057 2.06-.808-.808a.625.625 0 0 0-.883.884l1.25 1.25a.623.623 0 0 0 .883 0l2.5-2.5a.625.625 0 0 0 0-.884zM11.875 8.75h-2.5a.625.625 0 0 0 0 1.25h2.5a.625.625 0 0 0 0-1.25zM11.875 13.75h-2.5a.625.625 0 0 0 0 1.25h2.5a.625.625 0 0 0 0-1.25z"
            />
            <path
              d="M13.75 2.5h-2.5v-.625a.625.625 0 0 0-.625-.625H9.269A1.88 1.88 0 0 0 7.5 0a1.88 1.88 0 0 0-1.769 1.25H4.375a.625.625 0 0 0-.625.625V2.5h-2.5C.561 2.5 0 3.061 0 3.75v15C0 19.439.561 20 1.25 20h12.5c.689 0 1.25-.561 1.25-1.25v-15c0-.689-.561-1.25-1.25-1.25zM5 2.5h1.25c.345 0 .625-.28.625-.625a.625.625 0 0 1 1.25 0c0 .345.28.625.625.625H10v1.25H5V2.5zm8.75 16.25H1.25v-15h2.5v.625c0 .345.28.625.625.625h6.25c.345 0 .625-.28.625-.625V3.75h2.5v15z"
            />
          </g>
        </svg>
      </div>
      <div v-else-if="item.icon == 'Users'" class="flex-none pr-3 pl-14">
        <svg
          width="16"
          height="17"
          viewBox="0 0 16 17"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M11.785 6.706a3.74 3.74 0 0 0 1.43-2.94c0-2.068-1.69-3.75-3.766-3.75-2.077 0-3.767 1.682-3.767 3.75 0 .136.007.27.022.402a3.004 3.004 0 0 0-4.448 2.628c0 .86.367 1.637.953 2.184A3.69 3.69 0 0 0 0 12.356v3.483C0 16.479.521 17 1.161 17h12.355c.742 0 1.346-.604 1.346-1.346v-4.568a4.665 4.665 0 0 0-3.077-4.38zM9.45 1.154a2.623 2.623 0 0 1 2.628 2.612 2.623 2.623 0 0 1-2.628 2.612A2.623 2.623 0 0 1 6.82 3.766 2.623 2.623 0 0 1 9.45 1.154zM4.263 4.94a1.865 1.865 0 0 1 1.816 2.295c-.524.356-.971.816-1.313 1.35a1.865 1.865 0 0 1-2.372-1.788c0-1.024.838-1.857 1.869-1.857zm-3.125 10.9v-3.483A2.55 2.55 0 0 1 3.686 9.81h.527a4.644 4.644 0 0 0-.178 1.277v4.568c0 .07.005.14.016.208H1.16c-.011 0-.023-.012-.023-.023zm12.586-.185a.21.21 0 0 1-.208.208H5.38a.21.21 0 0 1-.207-.208v-4.568a3.522 3.522 0 0 1 3.519-3.518h1.513a3.522 3.522 0 0 1 3.519 3.518v4.568z"
            fill="#123E81"
            fill-rule="nonzero"
          />
        </svg>
      </div>
      <div v-else-if="item.icon == 'Chemical'" class="flex-none pr-3 pl-14">
        <svg
          width="14"
          height="20"
          viewBox="0 0 14 20"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M1.304 18.696V5.272h3.834v9.76a2.578 2.578 0 0 0 2.575 2.576h.244a2.578 2.578 0 0 0 2.575-2.575V3.058h.801V1.753H4.336v1.305h.802v.91H1.304V0H0v20h13.487v-1.304H1.304zm7.924-3.663c0 .7-.57 1.27-1.27 1.27h-.245c-.7 0-1.271-.57-1.271-1.27V8.58h2.786v6.452zM6.442 3.058h2.786v.91H6.442v-.91zm0 2.214h2.786v2.005H6.442V5.272z"
            fill="#123E81"
            fill-rule="nonzero"
          />
        </svg>
      </div>
      <span class="flex-grow">{{ item.label }}</span>
    </jet-nav-link>
    <!-- </component> -->
    <menu-list
      v-if="hasDropdown"
      :menu="item.menu"
      @menu-click="menuClick"
      :class="{
        hidden: !isDropdownActive,
        'block bg-[#edf4ff]  dark:bg-gray-800 dark:bg-opacity-50':
          isDropdownActive,
      }"
      is-submenu-list
    />
  </li>
</template>
